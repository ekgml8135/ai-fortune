<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI 2026 ì‹ ë…„ìš´ì„¸</title>
  <style>
    :root{
      --bg:#f9fafb; --card:#ffffff; --line:#e5e7eb; --muted:#6b7280;
      --accent:#ff7a00; --accentBg:#fff3e8; --text:#111827;
      --missionBg:#ff7a00;
      --missionText:#ffffff;
    }
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans KR",Roboto,Helvetica,Arial,sans-serif;
      background:var(--bg);
      margin:0; padding:24px;
      color:var(--text);
    }
    .wrap{
      max-width: 960px;
      margin: 0 auto;
      background: var(--card);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 10px 25px rgba(0,0,0,.06);
    }
    h1{ margin:0 0 6px; font-size:22px; }
    .sub{ margin:0 0 14px; color:var(--muted); font-size:13px; line-height:1.45; }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items: center;
      margin-top: 10px;
    }
    .datepack{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
      flex: 1;
      min-width: 280px;
    }
    .datepack .sep{
      color: var(--muted);
      font-size: 13px;
      user-select: none;
    }
    input[type="text"]{
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      font-size: 14px;
      background: #fff;
      outline: none;
    }
    input[type="text"]:focus{
      border-color: rgba(255,122,0,.55);
      box-shadow: 0 0 0 3px rgba(255,122,0,.12);
    }
    .y{ width: 120px; }
    .m,.d{ width: 84px; }

    button{
      padding: 10px 16px;
      border-radius: 10px;
      border: none;
      background: var(--accent);
      color: white;
      font-weight: 900;
      cursor: pointer;
      white-space: nowrap;
    }
    button:active{ transform: translateY(1px); }
    .hint{
      margin-top: 8px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.45;
    }

    .result{
      margin-top: 18px;
      padding-top: 18px;
      border-top: 1px solid var(--line);
      display:none;
    }
    .badge{
      display:inline-block;
      padding: 5px 10px;
      border-radius: 999px;
      background: var(--accentBg);
      color: var(--accent);
      font-size: 12px;
      font-weight: 900;
      margin-bottom: 10px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 860px){
      .grid-2{ grid-template-columns: 1fr 1fr; }
    }
    .card{
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 14px 14px 12px;
      background: #fff;
    }
    .card h2{ margin: 0 0 8px; font-size: 16px; }
    .card h3{ margin: 10px 0 6px; font-size: 14px; }
    .lead{ font-size: 14px; line-height: 1.55; margin: 6px 0 0; }
    .kvs{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom: 8px; }
    .kv{
      padding: 6px 10px;
      border-radius: 12px;
      background: #f3f4f6;
      font-size: 12px;
    }
    .kv b{ font-weight: 900; }

    .months{
      display:grid;
      grid-template-columns: 1fr;
      gap: 8px;
      margin-top: 8px;
    }
    @media (min-width: 860px){
      .months{ grid-template-columns: 1fr 1fr; }
    }
    .month{
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 10px 12px;
      background: #fff;
    }
    .month .m-title{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      font-weight: 900;
      font-size: 13px;
      margin-bottom: 6px;
    }
    .pill{
      font-size: 11px;
      font-weight: 900;
      background: var(--accentBg);
      color: var(--accent);
      padding: 3px 8px;
      border-radius: 999px;
      white-space: nowrap;
    }
    .month p{ margin:0; font-size: 13px; line-height: 1.45; }

    /* âœ… MISSION: ì§„í•œ ê°•ì¡° + ì–‡ê²Œ(ëš±ëš±í•´ ë³´ì´ì§€ ì•Šê²Œ) */
    .mission{
      margin-top: 8px;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(17,24,39,.12);
    }
    .mission .m-head{
      background: var(--missionBg);
      color: var(--missionText);
      font-weight: 900;
      font-size: 12px;
      padding: 6px 10px;
      letter-spacing: .2px;
      display:flex;
      align-items:center;
      gap: 8px;
    }
    .mission .m-body{
      padding: 8px 10px;
      font-size: 13px;
      line-height: 1.45;
      background: #fff;
    }
    .mission .m-body .arrow{
      color: var(--accent);
      font-weight: 900;
      margin-right: 6px;
    }

    .foot{
      margin-top: 14px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.5;
    }

    .err{
      margin-top: 10px;
      padding: 10px 12px;
      border: 1px solid #fecaca;
      background: #fff1f2;
      color: #991b1b;
      border-radius: 12px;
      display:none;
      font-size: 13px;
      line-height: 1.45;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>AIë¡œ ë³´ëŠ” 2026ë…„ ìš´ì„¸</h1>
    <p class="sub">ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ë©´ 2026ë…„ ìš´ì„¸ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>

    <div class="row">
      <div class="datepack" aria-label="ìƒë…„ì›”ì¼ ì…ë ¥">
        <input id="year" class="y" type="text" inputmode="numeric" autocomplete="bday-year"
               placeholder="YYYY" maxlength="4" aria-label="ì¶œìƒ ì—°ë„(4ìë¦¬)" />
        <span class="sep">-</span>
        <input id="month" class="m" type="text" inputmode="numeric" autocomplete="bday-month"
               placeholder="MM" maxlength="2" aria-label="ì¶œìƒ ì›”(2ìë¦¬)" />
        <span class="sep">-</span>
        <input id="day" class="d" type="text" inputmode="numeric" autocomplete="bday-day"
               placeholder="DD" maxlength="2" aria-label="ì¶œìƒ ì¼(2ìë¦¬)" />
      </div>

      <button id="go" type="button">ìš´ì„¸ ë³´ê¸°</button>
    </div>

    <div class="hint">
    </div>

    <div id="err" class="err"></div>
    <div id="out" class="result"></div>

    <div class="foot">
      â€» ì¬ë¯¸ë¡œ ê°€ë³ê²Œ ë³´ëŠ” ì½˜í…ì¸ ì…ë‹ˆë‹¤. ê°œì¸ì˜ ì„ íƒê³¼ ë…¸ë ¥ì— ë”°ë¼ ê²°ê³¼ëŠ” ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </div>
  </div>

<script>
/* ===================== ì…ë ¥ UX: ìˆ«ìë§Œ + ìë™ ì´ë™ + 0 íŒ¨ë”© ===================== */
const elY = document.getElementById("year");
const elM = document.getElementById("month");
const elD = document.getElementById("day");
const elGo = document.getElementById("go");
const elErr = document.getElementById("err");
const elOut = document.getElementById("out");

function onlyDigits(s){ return (s || "").replace(/\D/g, ""); }

function setError(msg){
  if(!msg){
    elErr.style.display = "none";
    elErr.textContent = "";
    return;
  }
  elErr.style.display = "block";
  elErr.textContent = msg;
}

function clampInt(v, min, max){
  const n = parseInt(v, 10);
  if(Number.isNaN(n)) return null;
  if(n < min) return min;
  if(n > max) return max;
  return n;
}

function daysInMonth(year, month){
  return new Date(year, month, 0).getDate();
}

function normalizeYear(){
  let y = onlyDigits(elY.value).slice(0,4);
  elY.value = y;
}
function normalizeMonth(){
  let m = onlyDigits(elM.value).slice(0,2);
  if(m.length === 0){ elM.value = ""; return; }
  if(m.length === 1){ elM.value = m; return; }
  const mi = clampInt(m, 1, 12);
  elM.value = String(mi).padStart(2, "0");
}
function normalizeDayFor(year, month){
  let d = onlyDigits(elD.value).slice(0,2);
  if(d.length === 0){ elD.value = ""; return; }
  if(d.length === 1){ elD.value = d; return; }
  const dim = daysInMonth(year, month);
  const di = clampInt(d, 1, dim);
  elD.value = String(di).padStart(2, "0");
}

function autoAdvance(fromEl, maxLen, toEl){
  const v = onlyDigits(fromEl.value);
  if(v.length >= maxLen){
    fromEl.value = v.slice(0, maxLen);
    if(toEl){
      toEl.focus();
      toEl.select?.();
    }
  }
}

elY.addEventListener("input", () => { normalizeYear(); autoAdvance(elY, 4, elM); });
elM.addEventListener("input", () => { elM.value = onlyDigits(elM.value).slice(0,2); autoAdvance(elM, 2, elD); });
elD.addEventListener("input", () => {
  elD.value = onlyDigits(elD.value).slice(0,2);
  if(onlyDigits(elD.value).length === 2){
    showFortune();
  }
});

elM.addEventListener("blur", () => normalizeMonth());
elD.addEventListener("blur", () => {
  const y = parseInt(elY.value, 10);
  const m = parseInt(elM.value, 10);
  if(!Number.isNaN(y) && !Number.isNaN(m)){
    normalizeMonth();
    normalizeDayFor(y, m);
  } else {
    elD.value = onlyDigits(elD.value).slice(0,2);
    if(elD.value.length === 1) elD.value = "0" + elD.value;
  }
});

function onEnterMove(e, next){
  if(e.key === "Enter"){
    e.preventDefault();
    if(next){ next.focus(); next.select?.(); }
    else { showFortune(); }
  }
}
elY.addEventListener("keydown", (e)=>onEnterMove(e, elM));
elM.addEventListener("keydown", (e)=>onEnterMove(e, elD));
elD.addEventListener("keydown", (e)=>onEnterMove(e, null));

elGo.addEventListener("click", showFortune);
window.addEventListener("load", () => elY.focus());

/* ===================== ë /ë³„ìë¦¬ ===================== */
const ZODIAC = ["ì¥","ì†Œ","í˜¸ë‘ì´","í† ë¼","ìš©","ë±€","ë§","ì–‘","ì›ìˆ­ì´","ë‹­","ê°œ","ë¼ì§€"];
function chineseZodiac(year){
  const idx = (year - 1900) % 12;
  return ZODIAC[(idx + 12) % 12];
}
function westernSign(month, day){
  if ((month===3 && day>=21) || (month===4 && day<=19)) return "ì–‘ìë¦¬";
  if ((month===4 && day>=20) || (month===5 && day<=20)) return "í™©ì†Œìë¦¬";
  if ((month===5 && day>=21) || (month===6 && day<=20)) return "ìŒë‘¥ì´ìë¦¬";
  if ((month===6 && day>=21) || (month===7 && day<=22)) return "ê²Œìë¦¬";
  if ((month===7 && day>=23) || (month===8 && day<=22)) return "ì‚¬ììë¦¬";
  if ((month===8 && day>=23) || (month===9 && day<=22)) return "ì²˜ë…€ìë¦¬";
  if ((month===9 && day>=23) || (month===10 && day<=22)) return "ì²œì¹­ìë¦¬";
  if ((month===10 && day>=23) || (month===11 && day<=21)) return "ì „ê°ˆìë¦¬";
  if ((month===11 && day>=22) || (month===12 && day<=21)) return "ì‚¬ìˆ˜ìë¦¬";
  if ((month===12 && day>=22) || (month===1 && day<=19)) return "ì—¼ì†Œìë¦¬";
  if ((month===1 && day>=20) || (month===2 && day<=18)) return "ë¬¼ë³‘ìë¦¬";
  return "ë¬¼ê³ ê¸°ìë¦¬";
}

/* ===================== ê²°ì •ì (ê³ ì •) ì‹œë“œ + ì…”í”Œ ===================== */
function xorshift32(x){
  x >>>= 0;
  x ^= (x << 13) >>> 0;
  x ^= (x >>> 17) >>> 0;
  x ^= (x << 5) >>> 0;
  return x >>> 0;
}
function makeSeed(y,m,d){
  let s = ((y & 0xffff) << 16) ^ ((m & 0xff) << 8) ^ (d & 0xff);
  s ^= 0x9e3779b9;
  s = xorshift32(s);
  s = xorshift32(s ^ (y * 2654435761 >>> 0));
  s = xorshift32(s ^ (m * 1597334677 >>> 0));
  s = xorshift32(s ^ (d * 3812015801 >>> 0));
  return s >>> 0;
}
function rnd01(seedObj){
  seedObj.v = xorshift32(seedObj.v);
  return seedObj.v / 0x100000000;
}
function shuffleWithSeed(arr, seed){
  const a = arr.slice();
  const s = {v: seed >>> 0};
  for(let i=a.length-1; i>0; i--){
    const j = Math.floor(rnd01(s) * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}
function pickOne(arr, seed, salt){
  const s = xorshift32((seed ^ salt) >>> 0);
  return arr[s % arr.length];
}
function sampleUnique(arr, n, seed, salt){
  const order = shuffleWithSeed(arr, xorshift32((seed ^ salt) >>> 0));
  return order.slice(0, Math.min(n, order.length));
}
function fill(t, vars){
  return t.replace(/\{(\w+)\}/g, (_,k)=> String(vars[k] ?? ""));
}
function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#39;");
}

/* ===================== ì½˜í…ì¸  ===================== */
const YEAR_THEMES = [
  { title: "ì •ë¦¬ í›„ ê°€ì†", flow: "ìƒë°˜ê¸°ëŠ” ì •ë¦¬ì™€ ì¬ë°°ì¹˜, í•˜ë°˜ê¸°ëŠ” ì†ë„ì™€ í™•ì¥ì´ í•¨ê»˜ ì˜µë‹ˆë‹¤." },
  { title: "ì„ íƒê³¼ ì§‘ì¤‘", flow: "í•  ì¼ì„ ì¤„ì¼ìˆ˜ë¡ ê²°ê³¼ê°€ ì»¤ì§‘ë‹ˆë‹¤. ë°©í–¥ì„ ì¡ìœ¼ë©´ ì‹¤í–‰ì´ ë¹¨ë¼ì§‘ë‹ˆë‹¤." },
  { title: "ì—°ê²°ì˜ í•´", flow: "ì‚¬ëŒÂ·ì •ë³´Â·ê¸°íšŒê°€ â€˜ì—°ê²°â€™ë¡œ ë“¤ì–´ì˜µë‹ˆë‹¤. í˜¼ìë³´ë‹¤ í•¨ê»˜ê°€ ìœ ë¦¬í•©ë‹ˆë‹¤." },
  { title: "ê¸°ë³¸ê¸° ê°•í™”", flow: "í•œ ë²ˆì˜ í° ì„±ê³¼ë³´ë‹¤, ì‘ì€ ìŠµê´€ì´ ëˆ„ì ë˜ë©° íŒì´ ë°”ë€ë‹ˆë‹¤." },
  { title: "ì „í™˜ì ", flow: "ì‘ì€ ê²°ë‹¨ì´ í° ì „í™˜ì„ ë§Œë“­ë‹ˆë‹¤. â€˜ì†ë„â€™ë³´ë‹¤ â€˜ë°©í–¥â€™ì´ ì¤‘ìš”í•©ë‹ˆë‹¤." },
  { title: "íšŒë³µê³¼ ë¦¬ì…‹", flow: "ë¬´ë¦¬í–ˆë˜ ë£¨í‹´ì„ ì •ë¦¬í•˜ê³  íšŒë³µí•˜ëŠ” íë¦„ì…ë‹ˆë‹¤. í…œí¬ë¥¼ ë§ì¶”ë©´ ì•ˆì •ë©ë‹ˆë‹¤." },
  { title: "í™•ì¥ê³¼ ë¸Œëœë”©", flow: "ì„±ê³¼ë¥¼ ë°–ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” í•´ì…ë‹ˆë‹¤. í¬ì§€ì…˜ì„ ì •í•˜ë©´ ê¸°íšŒê°€ ë”°ë¼ì˜µë‹ˆë‹¤." },
  { title: "ì•ˆì •ì  ìƒìŠ¹", flow: "í° ë³€ë™ë³´ë‹¤ ì•ˆì •ì ì¸ ìƒìŠ¹ì…ë‹ˆë‹¤. ê¾¸ì¤€í•¨ì´ ê°€ì¥ ê°•í•œ ì „ëµì…ë‹ˆë‹¤." }
];
const KEYWORDS = [
  "ì •ë¦¬","ë„ì•½","ê· í˜•","ì§‘ì¤‘","í™•ì¥","ì•ˆì •","ê´€ê³„","ë£¨í‹´","ê²°ë‹¨","ìœ ì—°í•¨","ì„±ì¥","íšŒë³µ",
  "ì •ì°©","ì „í™˜","ìˆ˜í™•","í˜‘ìƒ","ì†ë„","ì™„ì„±","ì •ë¹„","ë°œê²¬","ì„ ë³„","ì„¤ë“","ì‹¤í–‰","íœ´ì‹"
];
const FLOW_TAILS = [
  "ì˜¬í•´ëŠ” â€˜{k}â€™ì´ ì „ì²´ í‚¤ì›Œë“œì…ë‹ˆë‹¤.",
  "í•µì‹¬ì€ â€˜{k}â€™ì…ë‹ˆë‹¤. ì´ ê¸°ì¤€ë§Œ ì§€í‚¤ë©´ í”ë“¤ë¦¼ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.",
  "ì˜¬í•´ëŠ” â€˜{k}â€™ì„ ì˜ ì“°ë©´ ê¸°íšŒê°€ ìì£¼ ë³´ì…ë‹ˆë‹¤.",
  "ì˜¬í•´ëŠ” â€˜{k}â€™ì´ ì„±ê³¼ë¥¼ ì¢Œìš°í•©ë‹ˆë‹¤. ì‘ê²Œë¼ë„ ê³„ì† ì´ì–´ê°€ ë³´ì„¸ìš”.",
  "ì˜¬í•´ëŠ” â€˜{k}â€™ì´ ë°˜ë³µí•´ì„œ ë“±ì¥í•©ë‹ˆë‹¤. ê°™ì€ ì„ íƒì„ ì¤„ì´ëŠ” ê²Œ í¬ì¸íŠ¸ì…ë‹ˆë‹¤."
];

const FIELD_TEMPLATES = {
  work: [
    "ì—…ë¬´ëŠ” â€˜{k}â€™ì´ ê´€ê±´ì…ë‹ˆë‹¤. ë¨¼ì € ê¸°ì¤€ì„ ì„¸ìš°ë©´ ì†ë„ê°€ ë”°ë¼ì˜µë‹ˆë‹¤.",
    "ì¼ì—ì„œëŠ” â€˜{k}â€™ì´ ì„±ê³¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤. ì‹œì‘ì€ ë¹ ë¥´ê²Œ, ë§ˆë¬´ë¦¬ëŠ” ë‹¨ë‹¨í•˜ê²Œ ì¡ì•„ë³´ì„¸ìš”.",
    "ì—…ë¬´ìš´ì€ â€˜{k}â€™ ìª½ì´ ìœ ë¦¬í•©ë‹ˆë‹¤. í˜‘ì—…ì€ ì—­í• ì„ ëª…í™•íˆ í•˜ë©´ ë§ˆì°°ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.",
    "ì˜¬í•´ ì¼ì€ â€˜{k}â€™ì— ë‹¬ë ¤ ìˆìŠµë‹ˆë‹¤. í•œ ë²ˆì— í¬ê²Œë³´ë‹¤, ë‹¨ê³„ì ìœ¼ë¡œ ìŒ“ëŠ” í¸ì´ ì¢‹ìŠµë‹ˆë‹¤.",
    "ì¼ì—ì„œ â€˜{k}â€™ì„ ì„ íƒí•˜ë©´ ì‹¤ìˆ˜ê°€ ì¤„ê³ , ì‹ ë¢°ê°€ ëŠ˜ì–´ë‚©ë‹ˆë‹¤.",
    "ì—…ë¬´ëŠ” â€˜{k}â€™ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë¦¬í•˜ë©´ í¸í•´ì§‘ë‹ˆë‹¤. ë°˜ë³µ ì‘ì—…ì„ í…œí”Œë¦¿í™”í•´ ë³´ì„¸ìš”.",
    "ì¼ì€ â€˜{k}â€™ë¡œ í’€ë¦½ë‹ˆë‹¤. ì¤‘ìš”í•œ ê±´ â€˜ë” í•˜ê¸°â€™ê°€ ì•„ë‹ˆë¼ â€˜ëœì–´ë‚´ê¸°â€™ì…ë‹ˆë‹¤."
  ],
  money: [
    "ëˆì€ â€˜{k}â€™ ë°©ì‹ì´ ì•ˆì „í•©ë‹ˆë‹¤. í° ê²°ì •ë³´ë‹¤ ê´€ë¦¬ì™€ ë¶„ì‚°ì´ ìœ ë¦¬í•©ë‹ˆë‹¤.",
    "ê¸ˆì „ìš´ì€ â€˜{k}â€™ì´ í•µì‹¬ì…ë‹ˆë‹¤. ê³ ì •ë¹„ë¥¼ í•œ ë²ˆ ì ê²€í•´ë³´ë©´ ì²´ê°ì´ í½ë‹ˆë‹¤.",
    "ì¬ì •ì€ â€˜{k}â€™ë¡œ ê°€ë©´ í¸í•©ë‹ˆë‹¤. ìˆ˜ì…ë³´ë‹¤ â€˜ìƒˆëŠ” ëˆâ€™ë¶€í„° ì¡ì•„ë³´ì„¸ìš”.",
    "ëˆì—ì„œëŠ” â€˜{k}â€™ì´ ë‹µì…ë‹ˆë‹¤. ê³„íší•œ ì†Œë¹„ëŠ” ê´œì°®ê³ , ì¦‰í¥ì€ ì¤„ì¼ìˆ˜ë¡ ì¢‹ì•„ìš”.",
    "ê¸ˆì „ì€ â€˜{k}â€™ì´ ì˜ ë§ìŠµë‹ˆë‹¤. â€˜ì“¸ ë•Œ ì“°ê¸°â€™ë³´ë‹¤ â€˜ì§€í‚¬ ë•Œ ì§€í‚¤ê¸°â€™ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.",
    "ëˆì€ â€˜{k}â€™ë¡œ ì•ˆì •ë©ë‹ˆë‹¤. ì˜ˆì‚°ì„ ì‘ê²Œ ë‚˜ëˆ„ë©´ ì§€ì¶œì´ ëœ í”ë“¤ë¦½ë‹ˆë‹¤."
  ],
  love: [
    "ì—°ì• /ê´€ê³„ëŠ” â€˜{k}â€™ì´ í¬ì¸íŠ¸ì…ë‹ˆë‹¤. í‘œí˜„ì€ ì§§ê²Œ, í™•ì¸ì€ í•œ ë²ˆ ë” í•´ë³´ì„¸ìš”.",
    "ê´€ê³„ìš´ì€ â€˜{k}â€™ì— ë‹¬ë ¤ ìˆìŠµë‹ˆë‹¤. íƒ€ì´ë°ì„ ë§ì¶”ë©´ ì¼ì´ ë¶€ë“œëŸ½ê²Œ í’€ë¦½ë‹ˆë‹¤.",
    "ì—°ì• ìš´ì€ â€˜{k}â€™ì´ ìœ ë¦¬í•©ë‹ˆë‹¤. ë§ë³´ë‹¤ â€˜í–‰ë™â€™ì´ ì‹ ë¢°ë¥¼ ë§Œë“­ë‹ˆë‹¤.",
    "ê´€ê³„ëŠ” â€˜{k}â€™ë¡œ í’€ë¦½ë‹ˆë‹¤. ê¸°ëŒ€ì¹˜ë¥¼ ë§ì¶”ë©´ ì˜¤í•´ê°€ í¬ê²Œ ì¤„ì–´ë“­ë‹ˆë‹¤.",
    "ì—°ì• /ê´€ê³„ëŠ” â€˜{k}â€™ì´ ê´€ê±´ì…ë‹ˆë‹¤. ê°ì •ì´ ì˜¬ë¼ì˜¬ìˆ˜ë¡ í•œ ë°•ì ì²œì²œíˆ ê°€ì„¸ìš”.",
    "ê´€ê³„ìš´ì€ â€˜{k}â€™ì„ ì˜ ì“°ë©´ ì¢‹ì•„ì§‘ë‹ˆë‹¤. â€˜ìš”ì²­â€™ê³¼ â€˜ë°°ë ¤â€™ë¥¼ ë¶„ë¦¬í•´ ë§í•´ë³´ì„¸ìš”."
  ],
  health: [
    "ê±´ê°•ìš´ì€ â€˜{k}â€™ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ìˆ˜ë©´ê³¼ ë¦¬ë“¬ì„ ë¨¼ì € ì¡ìœ¼ë©´ ì²´ë ¥ì´ ë”°ë¼ì˜µë‹ˆë‹¤.",
    "ê±´ê°•ì€ â€˜{k}â€™ë¡œ ê´€ë¦¬í•˜ì„¸ìš”. ë¬´ë¦¬í•œ ëª°ì•„ì¹˜ê¸°ë³´ë‹¤ ê¾¸ì¤€í•¨ì´ ì´ê¹ë‹ˆë‹¤.",
    "ì˜¬í•´ ëª¸ì€ â€˜{k}â€™ê°€ ë‹µì…ë‹ˆë‹¤. ì‘ì€ ì‹ í˜¸ëŠ” ì´ˆê¸°ì— ì¼€ì–´í•˜ëŠ” í¸ì´ ì¢‹ìŠµë‹ˆë‹¤.",
    "ê±´ê°•ìš´ì€ â€˜{k}â€™ì— ë‹¬ë ¤ ìˆìŠµë‹ˆë‹¤. ì‹ì‚¬ ì‹œê°„ë§Œ ì¼ì •í•´ë„ ì»¨ë””ì…˜ì´ ì•ˆì •ë©ë‹ˆë‹¤.",
    "ê±´ê°•ì€ â€˜{k}â€™ ì¤‘ì‹¬ìœ¼ë¡œ. ì›€ì§ì„ê³¼ íœ´ì‹ì˜ ê· í˜•ì„ ë§ì¶”ëŠ” ê²Œ í•µì‹¬ì…ë‹ˆë‹¤.",
    "ì»¨ë””ì…˜ì€ â€˜{k}â€™ë¡œ ë°”ë€ë‹ˆë‹¤. ì¼ì •ì„ ì¤„ì´ê¸°ë³´ë‹¤ íšŒë³µ ì‹œê°„ì„ ë¨¼ì € í™•ë³´í•´ë³´ì„¸ìš”."
  ]
};

/* ---- ì›”ë³„ ë¬¸ì¥: ìœ í˜•ë³„ë¡œ ê²° ë‹¤ë¥´ê²Œ ---- */
const MONTH_TAGS = [
  "ì¤€ë¹„","ì •ë¦¬","ê°€ì†","í™•ì¥","ì •ì°©","ì „í™˜","ì¬ì •ë¹„","ìƒìŠ¹","ì„ íƒ","ìˆ˜í™•","ë§ˆë¬´ë¦¬","ë¦¬ì…‹",
  "í˜‘ìƒ","ì •ë¹„","ë°œê²¬","ì ê²€","ì‹¤í—˜","ì—°ê²°","ì •ëˆ","í™•ì¸","íœ´ì‹","ì¡°ì •","ëŒíŒŒ","ë§¤ë“­",
  "ìŠ¤ìœ„ì¹˜","ì •ë ¬","ì •ì°©","ì „ê°œ","ì •ë¦¬","ì™„ì„±","ë³´ì™„","ì¬ë°°ì¹˜"
];

const MONTH_POOLS = {
  situation: [
    "ì£¼ë³€ ìƒí™©ì´ ë¨¼ì € ì›€ì§ì´ëŠ” ë‹¬ì…ë‹ˆë‹¤. ê³„íšì„ ê³ ì§‘í•˜ê¸°ë³´ë‹¤ íë¦„ì„ ì½ëŠ” ìª½ì´ ìœ ë¦¬í•©ë‹ˆë‹¤.",
    "ì‘ì€ ë³€ìˆ˜ê°€ ìƒê¸°ê¸° ì‰½ìŠµë‹ˆë‹¤. â€˜ëŒ€ì‘ ê°€ëŠ¥í•œ ì¼ì •â€™ì´ ì˜¤íˆë ¤ ì„±ê³¼ë¥¼ ì§€ì¼œì¤ë‹ˆë‹¤.",
    "ê´€ì‹¬ì´ ë°–ìœ¼ë¡œ í–¥í•˜ëŠ” ë‹¬ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì •ë³´ê°€ ë“¤ì–´ì˜¤ë©´ ë©”ëª¨ë¶€í„° í•´ë‘ì„¸ìš”.",
    "ì†ë„ê°€ ë¶™ëŠ” ë‹¬ì…ë‹ˆë‹¤. ê²°ì •í•  ì¼ì´ ëŠ˜ì–´ë„, ìš°ì„ ìˆœìœ„ë§Œ ì§€í‚¤ë©´ ë©ë‹ˆë‹¤.",
    "íŒì´ ë°”ë€ŒëŠ” ì¡°ì§ì´ ë³´ì…ë‹ˆë‹¤. â€˜ì§€ê¸ˆ ë°©ì‹â€™ì´ ì˜ì›í•˜ì§€ ì•Šë‹¤ëŠ” ê±¸ ë°›ì•„ë“¤ì´ë©´ í¸í•´ì§‘ë‹ˆë‹¤.",
    "ë§ˆë¬´ë¦¬ê°€ ì¤‘ìš”í•œ ë‹¬ì…ë‹ˆë‹¤. ëë‚´ëŠ” ê°ê°ì´ ë‹¤ìŒ ë‹¬ì˜ ì—¬ìœ ë¥¼ ë§Œë“­ë‹ˆë‹¤.",
    "ì‚¬ëŒì„ í†µí•´ íŒíŠ¸ê°€ ë“¤ì–´ì˜µë‹ˆë‹¤. ìŠ¤ì³ ì§€ë‚˜ê°€ëŠ” ë§ì´ ë‹¤ìŒ ì„ íƒì§€ê°€ ë©ë‹ˆë‹¤.",
    "ì˜ˆìƒ ë°–ì˜ ê¸°íšŒê°€ ëˆˆì— ë•ë‹ˆë‹¤. í° ê²°ì •ë³´ë‹¤ â€˜ì‘ê²Œ í…ŒìŠ¤íŠ¸â€™ê°€ ì•ˆì „í•©ë‹ˆë‹¤.",
    "ë˜ëŒì•„ë³´ê¸°ê°€ í•„ìš”í•œ ë‹¬ì…ë‹ˆë‹¤. ì§€ê¸ˆì˜ ì†ë„ê°€ ì ì •í•œì§€ í•œ ë²ˆ ì ê²€í•´ë³´ì„¸ìš”."
  ],
  action: [
    "ì´ë²ˆ ë‹¬ì€ â€˜í•˜ë‚˜ë§Œ ëë‚´ê¸°â€™ë¥¼ í•´ë³´ì„¸ìš”. ì‘ì•„ë„ ëë‚¸ ê²½í—˜ì´ ë¦¬ë“¬ì„ ë§Œë“­ë‹ˆë‹¤.",
    "í•´ì•¼ í•  ì¼ì„ ëŠ˜ë¦¬ê¸°ë³´ë‹¤, í•˜ì§€ ì•Šì„ ì¼ì„ 3ê°œë§Œ ì •í•´ë³´ì„¸ìš”.",
    "ì‘ì—…ì„ â€˜1íšŒì„±â€™ìœ¼ë¡œ í•˜ì§€ ë§ê³  í…œí”Œë¦¿ìœ¼ë¡œ ë°”ê¾¸ë©´ ì²´ê°ì´ í½ë‹ˆë‹¤.",
    "ë©”ëª¨/ìë£Œë¥¼ í•œ ê³³ìœ¼ë¡œ ëª¨ì•„ë³´ì„¸ìš”. ì°¾ëŠ” ì‹œê°„ì´ ì¤„ë©´ ë§ˆìŒì´ ê°€ë²¼ì›Œì§‘ë‹ˆë‹¤.",
    "ë¯¸ë¤„ë‘” ì—°ë½ 1ê±´ë§Œ ì •ë¦¬í•´ë„ íë¦„ì´ ì—´ë¦½ë‹ˆë‹¤. ë¨¼ì € í•œ ë²ˆë§Œ ì›€ì§ì—¬ë³´ì„¸ìš”.",
    "ì™„ì„±ë³´ë‹¤ â€˜ê°€ì„¤ â†’ í™•ì¸â€™ì„ ë¹ ë¥´ê²Œ ëŒë ¤ë³´ì„¸ìš”.",
    "ì¡°ìš©íˆ ì¤€ë¹„í•˜ê³ , ê³µê°œëŠ” ìµœì†Œë¡œ í•˜ì„¸ìš”. â€˜ì™„ë£Œ í›„ ê³µìœ â€™ê°€ ê°€ì¥ ê°•í•©ë‹ˆë‹¤.",
    "ë”± 2ì‹œê°„ë§Œ â€˜ë°©í•´ ê¸ˆì§€â€™ë¡œ ì„¤ì •í•´ë³´ì„¸ìš”. ì§‘ì¤‘ë ¥ì´ ê²°ê³¼ë¥¼ ëŒì–´ì˜¬ë¦½ë‹ˆë‹¤.",
    "ì´ë²ˆ ë‹¬ì€ â€˜ì •ë¦¬ ë°ì´â€™ë¥¼ í•˜ë£¨ë§Œ ì¡ì•„ë³´ì„¸ìš”. í•œ ë²ˆì˜ ì •ëˆì´ ëª‡ ì£¼ë¥¼ ì‚´ë¦½ë‹ˆë‹¤."
  ],
  caution: [
    "ì†ë„ë¥¼ ì˜¬ë¦´ìˆ˜ë¡ ì‹¤ìˆ˜ê°€ ë‚˜ê¸° ì‰½ìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ê±´ â€˜ë‘ ë²ˆ í™•ì¸â€™ìœ¼ë¡œ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ê°ì •ì´ ì•ì„¤ ìˆ˜ ìˆëŠ” ë‹¬ì…ë‹ˆë‹¤. ë©”ì‹œì§€ëŠ” ë°”ë¡œ ë³´ë‚´ê¸°ë³´ë‹¤ í•œ ë²ˆë§Œ ì½ê³  ë³´ë‚´ì„¸ìš”.",
    "ë„ˆë¬´ ë§ì€ ì„ íƒì§€ë¥¼ í•œ ë²ˆì— ì¡ìœ¼ë©´ ì§€ì¹˜ê¸° ì‰½ìŠµë‹ˆë‹¤. â€˜í•˜ë‚˜ì”©â€™ì´ ì´ê¹ë‹ˆë‹¤.",
    "ì‚¬ëŒì˜ ë§ì— í”ë“¤ë¦¬ê¸° ì‰½ìŠµë‹ˆë‹¤. â€˜ë‚´ ê¸°ì¤€â€™ì„ ë¨¼ì € ì„¸ìš°ë©´ í”ë“¤ë¦¼ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.",
    "ì²´ë ¥ì´ ì„±ê³¼ë¥¼ ì¢Œìš°í•©ë‹ˆë‹¤. ë°¤ìƒ˜ìœ¼ë¡œ í•´ê²°í•˜ê¸°ë³´ë‹¤ ë¦¬ë“¬ì„ ì§€í‚¤ëŠ” í¸ì´ ë‚«ìŠµë‹ˆë‹¤.",
    "ëˆì€ ìƒˆëŠ” êµ¬ë©ì´ ìƒê¸°ê¸° ì‰½ìŠµë‹ˆë‹¤. ì •ê¸°ê²°ì œ/êµ¬ë…ë§Œ í™•ì¸í•´ë„ ë°©ì–´ê°€ ë©ë‹ˆë‹¤.",
    "ê´€ê³„ì—ì„œ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í™•ì¸ ì§ˆë¬¸ì„ ë§ë¶™ì´ë©´ ëŒ€ë¶€ë¶„ ì˜ˆë°©ë©ë‹ˆë‹¤.",
    "ì™„ë²½ì£¼ì˜ê°€ ë°œëª©ì„ ì¡ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 70%ì—ì„œ ì¶œë°œí•´ë„ ì¶©ë¶„íˆ ë³´ì™„ë©ë‹ˆë‹¤."
  ],
  social: [
    "ì´ë‹¬ì€ í˜‘ì—…ì—ì„œ ë‹µì´ ë‚˜ì˜µë‹ˆë‹¤. í˜¼ì ëŒê¸°ë³´ë‹¤ ì—­í• ì„ ë‚˜ëˆ„ë©´ ì†ë„ê°€ ë¶™ìŠµë‹ˆë‹¤.",
    "ëŒ€í™”ì˜ ë°€ë„ê°€ ë†’ì•„ì§€ëŠ” ë‹¬ì…ë‹ˆë‹¤. â€˜ë¬´ì—‡ì„ ì›í•˜ëŠ”ì§€â€™ë¥¼ ë¶„ëª…íˆ ë§í•˜ë©´ í¸í•´ì§‘ë‹ˆë‹¤.",
    "ì´ë‹¬ì€ â€˜ìš”ì²­â€™ì´ ì˜ í†µí•©ë‹ˆë‹¤. ë¶€íƒì„ ë¯¸ë£¨ì§€ ë§ê³  í•œ ë²ˆë§Œ ì •í™•íˆ ë§í•´ë³´ì„¸ìš”.",
    "ì´ë‹¬ì€ ìƒˆë¡œìš´ ì‚¬ëŒë³´ë‹¤ ê¸°ì¡´ ë„¤íŠ¸ì›Œí¬ê°€ ë„ì›€ì´ ë©ë‹ˆë‹¤. ë‹¤ì‹œ ì—°ë½í•´ë³´ì„¸ìš”.",
    "ì¹­ì°¬/ê°ì‚¬ê°€ ê´€ê³„ì˜ ë¬¸ì„ ì—½ë‹ˆë‹¤. ê²°ê³¼ê°€ ì•„ë‹ˆë¼ ê³¼ì •ì— í•œ ë§ˆë””ë¥¼ ì–¹ì–´ë³´ì„¸ìš”.",
    "í˜‘ìƒì€ â€˜ì¡°ê±´â€™ë³´ë‹¤ â€˜ê¸°ì¤€â€™ì„ ë§ì¶”ëŠ” ë°ì„œ ì‹œì‘í•©ë‹ˆë‹¤. ê¸°ì¤€ì„ ë¨¼ì € ê³µìœ í•´ë³´ì„¸ìš”."
  ],
  rhythm: [
    "ì»¨ë””ì…˜ì´ ê²°ê³¼ë¥¼ ì¢Œìš°í•©ë‹ˆë‹¤. ë°”ì ìˆ˜ë¡ ìˆ˜ë©´ ì‹œê°„ì„ ë¨¼ì € ì§€í‚¤ëŠ” ë‹¬ì…ë‹ˆë‹¤.",
    "ë¬´ë¦¬ì˜ ì—¬íŒŒê°€ ìŒ“ì´ê¸° ì‰½ìŠµë‹ˆë‹¤. íšŒë³µ ì‹œê°„ì„ ì¼ì •ì— â€˜ì˜ˆì•½â€™í•´ë‘ì„¸ìš”.",
    "ì´ë‹¬ì€ ëª¸ì´ ì‹ í˜¸ë¥¼ ì¤ë‹ˆë‹¤. ì‘ì€ ë¶ˆí¸í•¨ì€ ì´ˆê¸°ì— ì •ë¦¬í•˜ë©´ ê¸¸ê²Œ í¸í•©ë‹ˆë‹¤.",
    "ë¦¬ë“¬ì„ ê³ ì¹˜ê¸° ì¢‹ìŠµë‹ˆë‹¤. ì•„ì¹¨/ì ì‹¬ ì¤‘ í•˜ë‚˜ë§Œ ì¼ì •í•˜ê²Œ ë§ì¶°ë„ íš¨ê³¼ê°€ í½ë‹ˆë‹¤.",
    "ê¸°ë¶„ì´ í”ë“¤ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. â€˜ìš´ë™ 10ë¶„â€™ ê°™ì€ ì‘ì€ ë£¨í‹´ì´ ì•ˆì •ê°ì„ ì¤ë‹ˆë‹¤.",
    "ì´ë‹¬ì€ ì •ë¦¬ë³´ë‹¤ íšŒë³µì´ ë¨¼ì €ì…ë‹ˆë‹¤. ëœ í•´ë„ ê´œì°®ë‹¤ëŠ” í—ˆìš©ì´ í•„ìš”í•©ë‹ˆë‹¤."
  ]
};

const MONTH_TYPES_BASE = [
  "situation","action","social","caution","rhythm",
  "situation","action","social","caution","rhythm",
  "situation","action"
];

const FOCUSES = [
  "ì •ë¦¬","ì†ë„","ë°©í–¥","ìš°ì„ ìˆœìœ„","ì§‘ì¤‘","í˜‘ì—…","ëŒ€í™”","íšŒë³µ","ì²´ë ¥","ëˆê´€ë¦¬","ì„ íƒ","ë§ˆë¬´ë¦¬",
  "ê¸°ë¡","í…œí”Œë¦¿","í™•ì¸","í…ŒìŠ¤íŠ¸","ì¡°ì •","ê¸°ì¤€","ê²½ê³„","ìš”ì²­","ì •ëˆ","ë¦¬ë“¬","ì •ë¦¬ ë°ì´","ë£¨í‹´"
];

const AFTER_LINES = [
  "ì‘ê²Œ ì‹œì‘í•˜ë©´ ë¶€ë‹´ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.",
  "ë”± í•˜ë‚˜ë§Œ ì •í•´ë„ ì¶©ë¶„í•©ë‹ˆë‹¤.",
  "ì™„ë²½ë³´ë‹¤ ì§„í–‰ì´ ì´ê¹ë‹ˆë‹¤.",
  "ê¸°ì¤€ì´ ìƒê¸°ë©´ ë§ˆìŒì´ í¸í•´ì§‘ë‹ˆë‹¤.",
  "í•œ ë²ˆ ë” í™•ì¸í•˜ë©´ ëŒ€ë¶€ë¶„ í•´ê²°ë©ë‹ˆë‹¤.",
  "ì§€ê¸ˆ í˜ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤.",
  "ì˜¤ëŠ˜ í•  ìˆ˜ ìˆëŠ” ê²ƒë¶€í„° ê°€ë³ê²Œ.",
  "ìš•ì‹¬ì„ ì¤„ì´ë©´ ê²°ê³¼ê°€ ë” ì¢‹ì•„ì§‘ë‹ˆë‹¤."
];

/* ===================== MISSION ì„¤ì • ===================== */
/* 12ê°œì›” ì¤‘ ìµœëŒ€ 5ê°œë§Œ ë“±ì¥ + ì—°ì† ë“±ì¥ ë°©ì§€ + ìœ í˜•ë³„ ì´ëª¨ì§€ */
const MISSION_MAX = 5;

const MISSION_POOLS = {
  declutter: [
    "ì•ˆ ì“°ëŠ” ê²ƒ 10ê°œë§Œ ê³¨ë¼ ì •ë¦¬í•˜ê¸°",
    "íŒŒì¼/í´ë” 1ê³³ë§Œ ì •ë¦¬í•´ ì´ë¦„ ê·œì¹™ ë§Œë“¤ê¸°",
    "ì±…ìƒ ìœ„ì— ë‚¨ì€ ê²ƒ â€˜í•˜ë‚˜ë§Œâ€™ ì œìë¦¬ ë³´ë‚´ê¸°",
    "ì •ê¸°ê²°ì œ/êµ¬ë… ëª©ë¡ í›‘ê³  ë¶ˆí•„ìš”í•œ 1ê°œ ëŠê¸°",
    "í•´ì•¼ í•  ì¼ ëª©ë¡ì—ì„œ â€˜ì•ˆ í•´ë„ ë˜ëŠ” ê²ƒâ€™ 1ê°œ ì§€ìš°ê¸°"
  ],
  focus: [
    "30ë¶„ ì§‘ì¤‘ 2íšŒ ë§Œë“¤ê¸°(ì•Œë¦¼ OFF)",
    "ì˜¤ëŠ˜ í•  ì¼ 3ê°œë§Œ ë‚¨ê¸°ê³  ë‚˜ë¨¸ì§€ ë¯¸ë£¨ê¸°",
    "ê°€ì¥ ì¤‘ìš”í•œ 1ê±´ì„ â€˜ì‹œì‘â€™ë§Œ í•´ë‘ê¸°",
    "ë°˜ë³µ ì‘ì—… 1ê°œë¥¼ í…œí”Œë¦¿/ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ê¸°",
    "íšŒì˜/ëŒ€í™” ë©”ëª¨ë¥¼ í•œ ê³³ì— ëª¨ì•„ë‘ê¸°"
  ],
  connect: [
    "ì•ˆë¶€ ë©”ì‹œì§€ 1ê±´ ë¨¼ì € ë³´ë‚´ê¸°",
    "ë„ì›€ì´ í•„ìš”í–ˆë˜ ì‚¬ëŒì—ê²Œ ê°ì‚¬ í•œ ë§ˆë”” ì „í•˜ê¸°",
    "ìš”ì²­/í˜‘ì—… ê±´ 1ê°œë¥¼ ì§§ê²Œ ì •ë¦¬í•´ ì „ë‹¬í•´ë³´ê¸°",
    "ìµœê·¼ ë§Œë‚œ ì‚¬ëŒ 1ëª…ê³¼ ë‹¤ìŒ ì•½ì† â€˜ê°€ë³ê²Œâ€™ ì¡ê¸°",
    "ì˜¤í•´ë  ë§Œí•œ ë©”ì‹œì§€ëŠ” â€˜í™•ì¸ ì§ˆë¬¸â€™ í•œ ì¤„ ì¶”ê°€í•˜ê¸°"
  ],
  health: [
    "ìˆ˜ë©´ ì‹œê°„ 30ë¶„ë§Œ ì•ë‹¹ê²¨ ë³´ê¸°",
    "ë¬¼ 2ì»µ ë” ë§ˆì‹œê¸°(ì˜¤ì „/ì˜¤í›„ 1ì»µì”©)",
    "10ë¶„ ì‚°ì±… 2ë²ˆ í•˜ê¸°",
    "ì‹ì‚¬ ì‹œê°„ì„ 1ë¼ë§Œì´ë¼ë„ ê³ ì •í•´ë³´ê¸°",
    "ì‰¬ëŠ” ì‹œê°„ì„ ì¼ì •ì— â€˜ì˜ˆì•½â€™ìœ¼ë¡œ ë„£ì–´ë‘ê¸°"
  ],
  money: [
    "ì´ë²ˆ ë‹¬ ì˜ˆì‚°ì„ â€˜ì‘ê²Œâ€™ 3ì¹¸ìœ¼ë¡œ ë‚˜ëˆ„ê¸°(í•„ìˆ˜/ìœ ì§€/ì—¬ìœ )",
    "ì§€ì¶œì„ 24ì‹œê°„ ë³´ë¥˜ í›„ ê²°ì •í•´ë³´ê¸°(1íšŒë§Œ)",
    "í˜„ê¸ˆì„±/ì €ì¶• ë¹„ìœ¨ì„ 1%ë¼ë„ ì˜¬ë¦´ ë°©ë²• ì°¾ê¸°",
    "ê°€ê³„ë¶€/ë©”ëª¨ì— ì§€ì¶œ 5ê±´ë§Œ ê¸°ë¡í•´ë³´ê¸°",
    "í• ì¸/ì ë¦½/í¬ì¸íŠ¸ë¥¼ í•œ ë²ˆì— ì •ë¦¬í•´ë³´ê¸°"
  ]
};

const MISSION_EMOJI = {
  declutter: ["ğŸ§¹","ğŸ—‚ï¸","ğŸ§º","ğŸ§½","ğŸ§¾"],
  focus:     ["ğŸ¯","ğŸ”¥","ğŸ§ ","â±ï¸","âœ…"],
  connect:   ["ğŸ’¬","ğŸ¤","ğŸ“®","ğŸ«¶","ğŸ“"],
  health:    ["ğŸ’¤","ğŸš¶","ğŸ’§","ğŸ§˜","ğŸŒ¿"],
  money:     ["ğŸ’°","ğŸ“Š","ğŸ§¾","ğŸ¦","ğŸª™"]
};

/* ì›” ìœ í˜• â†’ ë¯¸ì…˜ ì¹´í…Œê³ ë¦¬ ì¶”ì²œ ë§µ (ìš´ì„¸ì™€ ì—°ê´€) */
const MONTHTYPE_TO_MISSIONCAT = {
  situation: ["focus","declutter","connect"],
  action:    ["focus","declutter"],
  social:    ["connect"],
  caution:   ["declutter","money","focus"],
  rhythm:    ["health"]
};

/* ===================== ì›”ë³„ ìƒì„±(ìš´ì„¸) ===================== */
function buildMonthly(seed){
  const types = shuffleWithSeed(MONTH_TYPES_BASE, xorshift32(seed ^ 0xA1B2C3D4));
  const tags = sampleUnique(MONTH_TAGS, 12, seed, 0x11);
  const focuses = sampleUnique(FOCUSES, 12, seed, 0x22);
  const afters = sampleUnique(AFTER_LINES, 12, seed, 0x33);

  const poolsShuffled = {};
  for(const t of Object.keys(MONTH_POOLS)){
    poolsShuffled[t] = shuffleWithSeed(MONTH_POOLS[t], xorshift32(seed ^ (t.length * 0x9e3779b9)));
  }
  const poolCursor = Object.fromEntries(Object.keys(MONTH_POOLS).map(t=>[t,0]));

  function nextFromPool(type){
    const arr = poolsShuffled[type];
    let idx = poolCursor[type] || 0;
    if(idx >= arr.length){
      poolsShuffled[type] = shuffleWithSeed(arr, xorshift32(seed ^ (idx + 777)));
      idx = 0;
    }
    poolCursor[type] = idx + 1;
    return poolsShuffled[type][idx];
  }

  const months = [];
  for(let i=1; i<=12; i++){
    const type = types[i-1];
    let text = nextFromPool(type);

    // í¬ì»¤ìŠ¤(ê°€ë”ë§Œ)
    const r = xorshift32(seed ^ (0x5000 + i));
    const addFocus = (r % 2 === 0);
    if(addFocus){
      const f = focuses[i-1];
      text = `${text} (ì´ˆì : ${f})`;
    }

    // í›„ì† í•œ ì¤„(í•­ìƒ ë¶™ì´ì§€ ë§ê³  ë³€ì£¼)
    const tail = afters[i-1];
    const attachTail = ((xorshift32(seed ^ (0x9000 + i)) % 3) !== 0); // ì•½ 2/3 í™•ë¥ 
    if(attachTail && tail){
      text = `${text} ${tail}`.trim(); // âœ… undefined + ê³µë°± ë°©ì§€
    }

    months.push({ month: i, tag: tags[i-1], type, text });
  }

  // ê°™ì€ í…ìŠ¤íŠ¸ê°€ ìƒê¸°ë©´(ê±°ì˜ ì—†ìŒ) ì•ˆì „ì¥ì¹˜
  const seen = new Set();
  for(const m of months){
    if(seen.has(m.text)){
      const altType = pickOne(Object.keys(MONTH_POOLS), seed, 0xDEAD0000 + m.month);
      const altTail = pickOne(AFTER_LINES, seed, 0xBEEF0000 + m.month);
      m.type = altType;
      m.text = `${pickOne(MONTH_POOLS[altType], seed, 0xABCD0000 + m.month)} ${altTail}`.trim();
    }
    seen.add(m.text);
  }
  return months;
}

/* ===================== MISSION ì„ íƒ(ìµœëŒ€ 5ê°œ, ì—°ì† ê¸ˆì§€, ì´ëª¨ì§€ ìœ í˜•ë³„) ===================== */
function pickMissionsForMonths(months, seed){
  // í›„ë³´ ì›”: ìœ í˜•ë³„ë¡œ ë¯¸ì…˜ì„ ë¶™ì¼ ê°€ì¹˜ê°€ ìˆëŠ” ë‹¬ë§Œ ë½‘ê¸°
  // (ëª¨ë“  ë‹¬ì— ë¶™ì´ë©´ ë§ì•„ ë³´ì´ë¯€ë¡œ)
  const candidateIdx = [];
  for(let i=0;i<months.length;i++){
    const t = months[i].type;
    // rhythm/social/action/caution/situation ëª¨ë‘ ê°€ëŠ¥í•˜ì§€ë§Œ, seedë¡œ í™•ë¥  ì¡°ì •
    const r = xorshift32(seed ^ (0xD00D0000 + i));
    const allow = (t === "rhythm") ? true
                : (t === "social") ? ((r % 2) === 0)          // 50%
                : (t === "action") ? ((r % 3) !== 0)         // ~66%
                : (t === "caution") ? ((r % 3) === 0)        // ~33%
                : (t === "situation") ? ((r % 4) === 0)      // 25%
                : false;
    if(allow) candidateIdx.push(i);
  }

  // í›„ë³´ê°€ ë„ˆë¬´ ì ìœ¼ë©´ ì „ì²´ì—ì„œ ë³´ì •(ìµœì†Œí•œ 5ê°œ ê·¼ì²˜ê°€ ë˜ë„ë¡)
  if(candidateIdx.length < MISSION_MAX){
    for(let i=0;i<months.length;i++){
      if(!candidateIdx.includes(i)) candidateIdx.push(i);
      if(candidateIdx.length >= MISSION_MAX + 3) break;
    }
  }

  // í›„ë³´ë¥¼ ì‹œë“œë¡œ ì…”í”Œ
  const shuffled = shuffleWithSeed(candidateIdx, xorshift32(seed ^ 0xCAFEBABE));

  // ì—°ì† ê¸ˆì§€ + ìµœëŒ€ 5ê°œë§Œ ì„ íƒ
  const chosen = [];
  const usedMonths = new Set();
  for(const idx of shuffled){
    if(chosen.length >= MISSION_MAX) break;
    if(usedMonths.has(idx)) continue;
    if(usedMonths.has(idx-1) || usedMonths.has(idx+1)) continue; // ì—°ì†/ì¸ì ‘ ê¸ˆì§€

    chosen.push(idx);
    usedMonths.add(idx);
  }

  // ë¯¸ì…˜ ë‚´ìš© ìƒì„±(ë‹¬ ìš´ì„¸ ìœ í˜•ê³¼ ì—°ë™)
  const missions = {};
  // ì¹´í…Œê³ ë¦¬ë³„ í’€ ì…”í”Œ(ì¤‘ë³µ ìµœì†Œí™”)
  const catOrders = {};
  for(const cat of Object.keys(MISSION_POOLS)){
    catOrders[cat] = shuffleWithSeed(MISSION_POOLS[cat], xorshift32(seed ^ (0x12340000 + cat.length)));
  }
  const catCursor = Object.fromEntries(Object.keys(MISSION_POOLS).map(c=>[c,0]));

  function nextMission(cat){
    const arr = catOrders[cat];
    let cur = catCursor[cat] || 0;
    if(cur >= arr.length){
      catOrders[cat] = shuffleWithSeed(arr, xorshift32(seed ^ (0x56780000 + cur)));
      cur = 0;
    }
    catCursor[cat] = cur + 1;
    return catOrders[cat][cur];
  }

  function pickEmoji(cat, seedSalt){
    const list = MISSION_EMOJI[cat] || ["âœ¨"];
    const s = xorshift32((seed ^ seedSalt) >>> 0);
    return list[s % list.length];
  }

  for(const idx of chosen){
    const monthType = months[idx].type;
    const cats = MONTHTYPE_TO_MISSIONCAT[monthType] || ["focus"];
    // ì›”/íƒ€ì…/ì‹œë“œë¡œ ì¹´í…Œê³ ë¦¬ ì„ íƒ
    const cat = pickOne(cats, seed, 0xBADA0000 + idx);
    const emoji = pickEmoji(cat, 0xFACE0000 + idx);
    const missionText = nextMission(cat);

    missions[idx] = {
      label: `MISSION! ${emoji}`,
      text: missionText
    };
  }

  return missions; // key: monthIndex(0-based)
}

/* ===================== ì—°ê°„/ë¶„ì•¼ë³„ ìš´ì„¸ ===================== */
function buildFortune(y,m,d){
  const seed = makeSeed(y,m,d);

  const animal = chineseZodiac(y);
  const sign = westernSign(m,d);

  const theme = pickOne(YEAR_THEMES, seed, 0x4000);
  const yearKeyword = pickOne(KEYWORDS, seed, 0x5000);
  const flowTail = fill(pickOne(FLOW_TAILS, seed, 0x6000), {k: yearKeyword});
  const bigFlow = `${theme.flow} ${flowTail}`;

  const workK   = pickOne(KEYWORDS, seed, 0x7001);
  const moneyK  = pickOne(KEYWORDS, seed, 0x7002);
  const loveK   = pickOne(KEYWORDS, seed, 0x7003);
  const healthK = pickOne(KEYWORDS, seed, 0x7004);

  const work   = fill(pickOne(FIELD_TEMPLATES.work, seed, 0x8001),   {k: workK});
  const money  = fill(pickOne(FIELD_TEMPLATES.money, seed, 0x8002),  {k: moneyK});
  const love   = fill(pickOne(FIELD_TEMPLATES.love, seed, 0x8003),   {k: loveK});
  const health = fill(pickOne(FIELD_TEMPLATES.health, seed, 0x8004), {k: healthK});

  const months = buildMonthly(seed);
  const missions = pickMissionsForMonths(months, seed);

  return { animal, sign, themeTitle: theme.title, bigFlow, work, money, love, health, months, missions };
}

/* ===================== ë Œë” ===================== */
function render(data){
  const monthsHtml = data.months.map((m, idx) => {
    const ms = data.missions[idx];
    const missionHtml = ms ? `
      <div class="mission" aria-label="ë¯¸ì…˜">
        <div class="m-head">${escapeHtml(ms.label)}</div>
        <div class="m-body"><span class="arrow">â–¶</span>${escapeHtml(ms.text)}</div>
      </div>
    ` : "";

    return `
      <div class="month">
        <div class="m-title">
          <span>${m.month}ì›”</span>
          <span class="pill">${escapeHtml(m.tag)}</span>
        </div>
        <p>${escapeHtml(m.text)}</p>
        ${missionHtml}
      </div>
    `;
  }).join("");

  elOut.innerHTML = `
    <div class="badge">${escapeHtml(data.animal)}ë  Â· ${escapeHtml(data.sign)}</div>

    <div class="grid grid-2">
      <div class="card">
        <h2>2026 í° íë¦„</h2>
        <div class="kvs">
          <div class="kv"><b>í…Œë§ˆ</b> ${escapeHtml(data.themeTitle)}</div>
        </div>
        <p class="lead">${escapeHtml(data.bigFlow)}</p>
      </div>

      <div class="card">
        <h2>ë¶„ì•¼ë³„ ìš´ì„¸</h2>
        <h3>ì¼</h3><p class="lead">${escapeHtml(data.work)}</p>
        <h3>ëˆ</h3><p class="lead">${escapeHtml(data.money)}</p>
        <h3>ì—°ì• /ê´€ê³„</h3><p class="lead">${escapeHtml(data.love)}</p>
        <h3>ê±´ê°•</h3><p class="lead">${escapeHtml(data.health)}</p>
      </div>
    </div>

    <div class="card" style="margin-top:12px;">
      <h2>ì›”ë³„ í¬ì¸íŠ¸</h2>
      <div class="months">${monthsHtml}</div>
    </div>
  `;
}

/* ===================== ìœ íš¨ì„± ê²€ì‚¬ + ì‹¤í–‰ ===================== */
function parseInputs(){
  const yRaw = onlyDigits(elY.value).slice(0,4);
  const mRaw = onlyDigits(elM.value).slice(0,2);
  const dRaw = onlyDigits(elD.value).slice(0,2);

  if(yRaw.length !== 4) return { ok:false, msg:"ì—°ë„(YYYY) 4ìë¦¬ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”." };
  if(mRaw.length !== 2) return { ok:false, msg:"ì›”(MM) 2ìë¦¬ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”. (ì˜ˆ: 04)" };
  if(dRaw.length !== 2) return { ok:false, msg:"ì¼(DD) 2ìë¦¬ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”. (ì˜ˆ: 17)" };

  const y = parseInt(yRaw, 10);
  const m = parseInt(mRaw, 10);
  if(!(y >= 1900 && y <= 2026)) return { ok:false, msg:"ì—°ë„ëŠ” 1900~2026 ë²”ìœ„ë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”." };
  if(!(m >= 1 && m <= 12)) return { ok:false, msg:"ì›”ì€ 01~12 ë²”ìœ„ë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”." };

  const dim = daysInMonth(y, m);
  const d = parseInt(dRaw, 10);
  if(!(d >= 1 && d <= dim)) return { ok:false, msg:`ì¼ì€ í•´ë‹¹ ì›”ì˜ 01~${String(dim).padStart(2,"0")} ë²”ìœ„ë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”.` };

  elY.value = String(y);
  elM.value = String(m).padStart(2,"0");
  elD.value = String(d).padStart(2,"0");

  return { ok:true, y, m, d };
}

function showFortune(){
  setError("");
  const p = parseInputs();
  if(!p.ok){
    setError(p.msg);
    elOut.style.display = "none";
    return;
  }
  const data = buildFortune(p.y, p.m, p.d);
  elOut.style.display = "block";
  render(data);
}
</script>
</body>
</html>
