<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI 2026 신년운세</title>
  <style>
    :root{
      --bg:#f9fafb; --card:#ffffff; --line:#e5e7eb; --muted:#6b7280;
      --accent:#ff7a00; --accentBg:#fff3e8; --text:#111827;
    }
    body{
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI","Noto Sans KR", Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      margin: 0; padding: 24px;
      color: var(--text);
    }
    .wrap{
      max-width: 860px; margin: 0 auto;
      background: var(--card); border-radius: 16px;
      padding: 24px; box-shadow: 0 10px 25px rgba(0,0,0,.06);
    }
    h1{ margin: 0 0 6px; font-size: 22px; }
    .sub{ color: var(--muted); font-size: 13px; margin: 0 0 14px; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; }
    input{
      flex: 1; min-width: 220px;
      padding: 10px 12px; border-radius: 10px;
      border: 1px solid #d1d5db; font-size: 14px;
      background: #fff;
    }
    button{
      padding: 10px 16px; border-radius: 10px; border: none;
      background: var(--accent); color: white; font-weight: 800;
      cursor: pointer;
    }
    button:active{ transform: translateY(1px); }
    .hint{ margin-top: 8px; font-size: 12px; color: var(--muted); }
    .result{ margin-top: 18px; padding-top: 18px; border-top: 1px solid var(--line); display:none; }
    .badge{
      display:inline-block; padding: 5px 10px; border-radius: 999px;
      background: var(--accentBg); color: var(--accent);
      font-size: 12px; font-weight: 800;
      margin-bottom: 10px;
    }
    .grid{
      display:grid; grid-template-columns: 1fr; gap: 12px;
    }
    @media (min-width: 760px){
      .grid-2{ grid-template-columns: 1fr 1fr; }
    }
    .card{
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 14px 14px 12px;
      background: #fff;
    }
    .card h2{ margin: 0 0 8px; font-size: 16px; }
    .card h3{ margin: 0 0 6px; font-size: 14px; }
    .kvs{ display:flex; gap:8px; flex-wrap:wrap; }
    .kv{
      padding: 6px 10px;
      border-radius: 12px;
      background: #f3f4f6;
      font-size: 12px;
    }
    .kv b{ font-weight: 900; }
    .lead{
      font-size: 14px; line-height: 1.55;
      margin: 6px 0 0;
    }
    .muted{ color: var(--muted); }
    .months{
      display:grid;
      grid-template-columns: 1fr;
      gap: 8px;
      margin-top: 8px;
    }
    @media (min-width: 760px){
      .months{ grid-template-columns: 1fr 1fr; }
    }
    .month{
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 10px 12px;
      background: #fff;
    }
    .month .m-title{
      display:flex; justify-content:space-between; align-items:center;
      gap: 10px;
      font-weight: 900;
      font-size: 13px;
      margin-bottom: 6px;
    }
    .month .pill{
      font-size: 11px; font-weight: 800;
      background: var(--accentBg); color: var(--accent);
      padding: 3px 8px; border-radius: 999px;
      white-space: nowrap;
    }
    .month .m-text{ font-size: 13px; line-height: 1.45; margin: 0; }
    .foot{
      margin-top: 14px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>AI로 보는 2026년 운세</h1>
    <p class="sub">생년월일만 입력하면 2026년 전체 흐름과 월별 포인트가 한 번에 나옵니다.</p>

    <div class="row">
      <input id="dob" type="date" />
      <button id="go">운세 보기</button>
    </div>
    <div class="hint">결과는 랜덤이 아니라, 같은 생년월일이면 항상 동일합니다.</div>

    <div id="out" class="result"></div>

    <div class="foot">
      ※ 재미로 가볍게 보는 콘텐츠입니다. 개인의 선택과 노력에 따라 결과는 달라질 수 있습니다.
    </div>
  </div>

<script>
/** ---------- 기본 계산: 띠/별자리 ---------- **/
const ZODIAC = ["쥐","소","호랑이","토끼","용","뱀","말","양","원숭이","닭","개","돼지"];

function chineseZodiac(year){
  // 1900년=쥐 기준
  const idx = (year - 1900) % 12;
  return ZODIAC[(idx + 12) % 12];
}

function westernSign(month, day){
  // 월은 1~12
  if ((month===3 && day>=21) || (month===4 && day<=19)) return "양자리";
  if ((month===4 && day>=20) || (month===5 && day<=20)) return "황소자리";
  if ((month===5 && day>=21) || (month===6 && day<=20)) return "쌍둥이자리";
  if ((month===6 && day>=21) || (month===7 && day<=22)) return "게자리";
  if ((month===7 && day>=23) || (month===8 && day<=22)) return "사자자리";
  if ((month===8 && day>=23) || (month===9 && day<=22)) return "처녀자리";
  if ((month===9 && day>=23) || (month===10 && day<=22)) return "천칭자리";
  if ((month===10 && day>=23) || (month===11 && day<=21)) return "전갈자리";
  if ((month===11 && day>=22) || (month===12 && day<=21)) return "사수자리";
  if ((month===12 && day>=22) || (month===1 && day<=19)) return "염소자리";
  if ((month===1 && day>=20) || (month===2 && day<=18)) return "물병자리";
  return "물고기자리";
}

/** ---------- 결정적(고정) 랜덤: 생년월일 → 시드 ---------- **/
function xorshift32(seed){
  // 32-bit xorshift, deterministic
  let x = seed >>> 0;
  x ^= (x << 13) >>> 0;
  x ^= (x >>> 17) >>> 0;
  x ^= (x << 5) >>> 0;
  return x >>> 0;
}

function makeSeed(y,m,d){
  // 간단한 시드 조합 (암호 목적 아님)
  let seed = (y * 10000 + m * 100 + d) >>> 0;
  seed ^= 0x9e3779b9; // golden ratio constant
  seed = xorshift32(seed);
  return seed >>> 0;
}

function pick(arr, seed, salt){
  const v = xorshift32((seed ^ salt) >>> 0);
  return arr[v % arr.length];
}

/** ---------- 문구 풀: 큰 흐름 / 분야별 / 월별 ---------- **/
const YEAR_THEMES = [
  { title: "정리 후 도약", flow: "상반기에는 기준을 정리하고, 하반기에는 속도를 내는 흐름입니다." },
  { title: "속도 조절", flow: "빠르게 움직이되, 중요한 순간엔 한 번 더 점검하면 성과가 커집니다." },
  { title: "기본기 강화", flow: "눈에 띄는 한 방보다, 작은 습관이 누적되며 결과를 바꿉니다." },
  { title: "확장과 연결", flow: "사람과 정보의 연결이 기회를 만들고, 선택지가 넓어지는 해입니다." },
  { title: "선택과 집중", flow: "할 일을 줄일수록 완성도가 올라가고, 집중한 분야에서 빛이 납니다." },
  { title: "안정적 상승", flow: "큰 변동보다 안정적으로 올라갑니다. ‘지속’이 최고의 전략입니다." }
];

const KEYWORDS = ["정리","도약","균형","집중","확장","안정","관계","루틴","결단","유연함","성장","회복"];

const FIELD_TEMPLATES = {
  work: [
    "업무는 ‘{k}’이 관건입니다. 작은 기준을 세우면 반복 업무가 줄어듭니다.",
    "일에서는 ‘{k}’이 성과로 이어집니다. 시작을 빠르게 하고 마무리를 단단히 하세요.",
    "업무운은 ‘{k}’ 쪽이 유리합니다. 협업은 역할을 명확히 하면 속도가 붙습니다.",
    "올해 일은 ‘{k}’에 달려 있습니다. 한 번에 크게보다, 단계적으로 쌓는 게 좋습니다."
  ],
  money: [
    "돈은 ‘{k}’ 방식이 안전합니다. 큰 결정보다 관리와 분산이 유리합니다.",
    "금전운은 ‘{k}’이 핵심입니다. 지출 항목을 줄이면 여유가 생깁니다.",
    "재정은 ‘{k}’로 가면 편합니다. 수입보다 ‘새는 돈’부터 잡아보세요.",
    "돈에서는 ‘{k}’이 답입니다. 계획한 소비는 괜찮고, 즉흥은 줄일수록 좋아요."
  ],
  love: [
    "연애/관계는 ‘{k}’이 포인트입니다. 표현은 짧게, 확인은 한 번 더 해보세요.",
    "관계운은 ‘{k}’에 달려 있습니다. 먼저 다가가기보다, 타이밍을 잘 잡는 해입니다.",
    "연애운은 ‘{k}’이 유리합니다. 말보다 ‘행동’이 신뢰를 만들어요.",
    "관계는 ‘{k}’로 풀립니다. 기대치를 맞추면 오해가 확 줄어듭니다."
  ],
  health: [
    "건강운은 ‘{k}’이 중요합니다. 수면과 리듬을 먼저 잡으면 체력이 따라옵니다.",
    "건강은 ‘{k}’로 관리하세요. 무리한 몰아치기보다, 꾸준함이 이깁니다.",
    "올해 몸은 ‘{k}’가 답입니다. 작은 통증은 초기에 케어하는 편이 좋습니다.",
    "건강운은 ‘{k}’에 달려 있습니다. 식사 시간만 일정해도 컨디션이 안정됩니다."
  ]
};

const MONTH_PILLS = [
  "준비", "정리", "가속", "확장", "정착", "전환",
  "재정비", "상승", "선택", "수확", "마무리", "리셋"
];

const MONTH_TEMPLATES = [
  "이번 달은 ‘{k}’에 집중하면 좋습니다. 작은 한 가지를 끝내는 게 포인트입니다.",
  "‘{k}’이 흐름을 바꿉니다. 일정은 넉넉하게 잡을수록 결과가 좋아요.",
  "‘{k}’이 기회를 부릅니다. 미뤄둔 연락/정리가 의외의 도움을 줍니다.",
  "‘{k}’이 유리합니다. 새로운 시도는 작게 시작하면 부담이 줄어요.",
  "‘{k}’이 핵심입니다. 속도보다 방향을 먼저 맞추세요.",
  "‘{k}’이 잘 맞는 달입니다. 체크리스트로 실수를 줄이면 편해집니다."
];

/** ---------- 텍스트 조합 ---------- **/
function fillTemplate(tpl, k){
  return tpl.replaceAll("{k}", k);
}

function buildMonthlyPoints(seed){
  const months = [];
  // 12개월 각각 다른 고정 선택
  for (let i=1; i<=12; i++){
    const kw = pick(KEYWORDS, seed, 0x1000 + i);
    const pill = pick(MONTH_PILLS, seed, 0x2000 + i);
    const tpl = pick(MONTH_TEMPLATES, seed, 0x3000 + i);
    months.push({
      month: i,
      pill,
      text: fillTemplate(tpl, kw)
    });
  }
  return months;
}

function buildYearFortune(y,m,d){
  const seed = makeSeed(y,m,d);

  const animal = chineseZodiac(y);
  const sign = westernSign(m,d);

  const theme = pick(YEAR_THEMES, seed, 0x4000);
  const yearKeyword = pick(KEYWORDS, seed, 0x5000);

  const workK = pick(KEYWORDS, seed, 0x6001);
  const moneyK = pick(KEYWORDS, seed, 0x6002);
  const loveK = pick(KEYWORDS, seed, 0x6003);
  const healthK = pick(KEYWORDS, seed, 0x6004);

  const work = fillTemplate(pick(FIELD_TEMPLATES.work, seed, 0x7001), workK);
  const money = fillTemplate(pick(FIELD_TEMPLATES.money, seed, 0x7002), moneyK);
  const love = fillTemplate(pick(FIELD_TEMPLATES.love, seed, 0x7003), loveK);
  const health = fillTemplate(pick(FIELD_TEMPLATES.health, seed, 0x7004), healthK);

  const months = buildMonthlyPoints(seed);

  // “큰 흐름” 문장에 키워드 추가해서 더 그럴듯하게
  const bigFlow = `${theme.flow} 올해의 메인 키워드는 ‘${yearKeyword}’입니다.`;

  return { animal, sign, themeTitle: theme.title, bigFlow, work, money, love, health, months };
}

/** ---------- 렌더링 ---------- **/
function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#39;");
}

function render(out, data){
  const monthsHtml = data.months.map(m =>
    `<div class="month">
      <div class="m-title">
        <span>${m.month}월</span>
        <span class="pill">${escapeHtml(m.pill)}</span>
      </div>
      <p class="m-text">${escapeHtml(m.text)}</p>
    </div>`
  ).join("");

  out.innerHTML = `
    <div class="badge">${escapeHtml(data.animal)}띠 · ${escapeHtml(data.sign)}</div>

    <div class="grid grid-2">
      <div class="card">
        <h2>2026 큰 흐름</h2>
        <div class="kvs">
          <div class="kv"><b>테마</b> ${escapeHtml(data.themeTitle)}</div>
        </div>
        <p class="lead">${escapeHtml(data.bigFlow)}</p>
      </div>

      <div class="card">
        <h2>분야별 운세</h2>
        <div class="item"><h3>일</h3><div class="lead">${escapeHtml(data.work)}</div></div>
        <div class="item"><h3>돈</h3><div class="lead">${escapeHtml(data.money)}</div></div>
        <div class="item"><h3>연애/관계</h3><div class="lead">${escapeHtml(data.love)}</div></div>
        <div class="item"><h3>건강</h3><div class="lead">${escapeHtml(data.health)}</div></div>
      </div>
    </div>

    <div class="card" style="margin-top:12px;">
      <h2>월별 포인트</h2>
      <div class="months">${monthsHtml}</div>
    </div>
  `;
}

/** ---------- 이벤트 ---------- **/
document.getElementById("go").addEventListener("click", () => {
  const v = document.getElementById("dob").value;
  if(!v){
    alert("생년월일을 입력해 주세요.");
    return;
  }
  const [y,m,d] = v.split("-").map(n => parseInt(n,10));
  const data = buildYearFortune(y,m,d);

  const out = document.getElementById("out");
  out.style.display = "block";
  render(out, data);
});
</script>
</body>
</html>
